<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Mario Lukas">
  <link rel="shortcut icon" href="../images/fabscanpi_ICON.png">
  
  <title>Software - FabScanPi</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Software";
    var mkdocs_page_input_path = "software.md";
    var mkdocs_page_url = "/software/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
   
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> FabScanPi</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../news/">News</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../hardware/">Hardware</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Software</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#installing-the-software">Installing the Software</a></li>
                
            
                <li class="toctree-l3"><a href="#updating-the-software">Updating the Software</a></li>
                
            
                <li class="toctree-l3"><a href="#software-user-manual">Software User Manual</a></li>
                
            
                <li class="toctree-l3"><a href="#config-file-values">Config File Values</a></li>
                
            
                <li class="toctree-l3"><a href="#how-to-edit-the-config-file">How to Edit the Config File</a></li>
                
                    <li><a class="toctree-l4" href="#troubleshooting">Troubleshooting</a></li>
                
            
                <li class="toctree-l3"><a href="#setting-up-a-wifi-connection">Setting up a WIFI connection</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../examples/">Examples</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../developing/">Developing</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../contributing/">Contributing</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../community/">Community</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../faq/">F.A.Q</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">FabScanPi</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Software</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/mariolukas/FabScanPi-Server/edit/master/docs/software.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="installing-the-software">Installing the Software</h1>
<p>There ist no need to flash the Arduino which is located on the FabScan PI HAT. It will be flashed automatically with the current firmware version after the server is started.</p>
<p><strong>Installation with FabScanPi Image (recommended)</strong></p>
<p>The fastest way to start working with FabScan PI is to use the FabScan PI Raspbian Image. </p>
<p>For the installation you will need the following things:</p>
<ul>
<li>A computer with integrated or connected card reader</li>
<li>A Micro-SD card with at least capacity of 8 GB</li>
<li>A software to format the SD card (e.g. <a href="https://www.sdcard.org/downloads/formatter_4/">SD-Formatter</a>)</li>
<li>A software to install the image on the SD card (e.g. <a href="https://sourceforge.net/projects/win32diskimager/">Win32DiskImager</a>)</li>
<li>The latest <a href="https://github.com/mariolukas/FabScanPi-Build-Raspbian/releases/latest">FabScan PI Raspbian image</a></li>
</ul>
<p>Download the SD-Formatter an the Win32Disk image software and install them on your computer. Tip: During the installation takes place you can already download and unzip the latest FabScan PI image and save some time. In the end you should have a file with .img extension.</p>
<p>Now insert the Micro-SD card into the card reader which is connected with your computer.</p>
<p><img alt="SDFormatter" src="../images/SD-Formatter_1.jpg" /></p>
<p>Start the SD-Formatter software and select the correct device letter. Double-check that because otherwise there is a risk of formatting another drive. Note: The displayed size of the selected card my vary from the physical size. This is because of an old image which is already installed on the card.</p>
<p>Click on the "Format" button to format the selected SD card. </p>
<p><img alt="SDFormatter" src="../images/SD-Formatter_2.jpg" /></p>
<p>When the formatting process is completed an information window will pop-up. Leave the card in the reader.</p>
<p><img alt="SDFormatter" src="../images/SD-Formatter_3.jpg" /></p>
<p>Exit the SD-Formatter and start the Win32DiskImager for transferring the image on the freshly formatted card.</p>
<p><img alt="SDFormatter" src="../images/Win32DiskImager_1.jpg" /></p>
<p>Select same device as before in the SD-Formatter software. Click on the folder icon and select the image file in your file system. Normally it should be in your browser's download folder. Make sure to unzip it first to get the image with .img extension.</p>
<p><img alt="SDFormatter" src="../images/Win32DiskImager_2.jpg" /></p>
<p>Click on the "Write" button and the installation process will begin to start. When it's finished you will be informed by a pop-up.  Click on the "exit" button to close Win32DiskImager.</p>
<p><img alt="SDFormatter" src="../images/Win32DiskImager_3.jpg" /></p>
<p>Now your SD-Card is ready to be put into the card slot of your FabScanPi.</p>
<p>After the image is flashed and the Raspberry Pi is up and running follow the instructions in the <a href="https://github.com/mariolukas/FabScanPi-Server/blob/master/README.md#useage">Usage section</a></p>
<p><strong>Installing with fresh Raspbian and packages</strong></p>
<p>This description assumes that you have a SD card with a fresh Raspbian image on it. </p>
<p>First add the fabscan repository to your source list. </p>
<pre><code>echo &quot;deb http://archive.fabscan.org/ jessie main&quot; &gt;&gt; /etc/apt/sources.list
</code></pre>

<p>Then add the FabScan PI repository key to your key chain.</p>
<pre><code>wget http://archive.fabscan.org/fabscan.public.key -O - | sudo apt-key add -
</code></pre>

<p>Update the package list.</p>
<pre><code>apt-get update
</code></pre>

<p>Finish the installation with the needed packages.</p>
<pre><code>apt-get install fabscanpi-server python-opencv-tbb libtbb2  python-pil python-serial python-pykka python-picamera avrdude python-semver python-scipy
</code></pre>

<p>The FabScan PI server can be started with </p>
<pre><code>sudo /etc/init.d/fabscanpi-server start
</code></pre>

<p>Read <a href="https://github.com/mariolukas/FabScanPi-Server/blob/master/README.md#useage">Usage</a> section for the next steps.</p>
<p><strong>Build your own image of FabScan Pi</strong></p>
<p>The image can be build with the FabScanPi Image build script. You will find more </p>
<p>information <a href="../developing/#Building FabScanPi Images">here</a></p>
<p><strong>Installation: With Source Code</strong></p>
<p>Dependencies</p>
<p>FabScan PI software depends on some python libraries. You need to install pyserial, pykka, opencv with tbb support 
and picamera. The easiest way to install all dependencies is to use debians package manager apt. Some of the packages, 
like opencv with tbb support and libtbb are not provided by the official raspbian mirrors. You need to add the
fabscan repository to your apt source list. </p>
<p>Build Debian package
Install dependencies</p>
<pre><code>sudo apt-get install build-essential dpkg-dev debhelper devscripts fakeroot cdbs python-setuptools python-support
</code></pre>

<p>The package is build by calling</p>
<pre><code>make deb
</code></pre>

<p>Afterwards the package can be installed by </p>
<pre><code>dpkg -i fabscabpi-server&lt;package-version&gt;.deb
</code></pre>

<h1 id="updating-the-software">Updating the Software</h1>
<p>Updates can be installed with debian's apt-get package manager. Log in via ssh and check/install 
updates with the following command.</p>
<pre><code>sudo apt-get update &amp;&amp; sudo apt-get dist-upgrade
</code></pre>

<h1 id="software-user-manual">Software User Manual</h1>
<ul>
<li>
<p><a href="#gettingStarted">Getting Started</a></p>
</li>
<li>
<p><a href="#presets">Presets</a></p>
</li>
<li>
<p><a href="#performAScan">Perform a scan</a></p>
</li>
<li>
<p><a href="#generateMesh">Generate Mesh</a></p>
</li>
<li>
<p><a href="#fileOperations">File Operations</a></p>
</li>
</ul>
<p>FabScan Pi is tested on: </p>
<table>
<thead>
<tr>
<th align="center">Browser</th>
<th align="center">OS</th>
<th align="center">Versions</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img alt="browser_logo" src="../images/chrome-logo.png" /></td>
<td align="center">OSX, Windows</td>
<td align="center">47.0.2526.106 (64-bit), 58.0.3029.110 (64-bit)</td>
</tr>
<tr>
<td align="center"><img alt="browser_logo" src="../images/firefox-logo.png" /></td>
<td align="center">OSX, Windows</td>
<td align="center">43.0.4,  53.0.3 (64-Bit) , 54.0 (32bit)</td>
</tr>
<tr>
<td align="center"><img alt="browser_logo" src="../images/safari-logo.png" /></td>
<td align="center">OSX</td>
<td align="center">Version 9.1.1 (11601.6.17)</td>
</tr>
</tbody>
</table>
<p><strong>Getting Started<a name="gettingStarted"></a></strong></p>
<ul>
<li>By default the FabScanPi server binds to all interfaces on port 8080. Pointing your browser to http://ip-of-your-raspberry-pi:8080 will open the user interface. </li>
</ul>
<p>If your FabScanPi has access to the internet an information window with the latest project news will pop-up. You can close it by left-clicking on the black x in the upper right corner of the grey info window. If there is a new software version available you will see a note in the upper left corner:</p>
<p><img alt="main_menu" src="../images/Manual_UpdateAvailable_1.jpg" /></p>
<p><strong>First start-up<a name="firststartup-"></a></strong></p>
<p>Before you proceed with the calibration and your first scan please check a few things to ensure your FabScanPi is working properly:</p>
<ul>
<li>Click on the duck icon (New Scan) to enter the scan menu.</li>
<li>Now the turntable should turn clockwise in a constant smooth manner.</li>
<li>The laser must be on and needs to be adjusted vertically and to cross the center of the turntable. You will have to do the adjustment by hand because the servo / stepper support for the laser has not been implemented yet.</li>
<li>Check if you can see a small video preview in the lower left corner of the scan menu. Maybe there is only a turning hour glass visible. That is a known problem of some browsers but will have not effect the scanner's function.</li>
<li>Click on the X (Cancel) to get back to the main menu.</li>
</ul>
<hr />
<p><strong>Calibration<a name="calibration"></a></strong></p>
<p>Before you can start with your first scans you must perform a calibration. That is necessary because every Scanner housing is a bit different.  By calibrating your scanner the software will get the exact parameters of your FabScanPi. You will have to do the calibration only once, the gathered data will be stored. But we recommend to do a calibration every time when the FabScanPi has been shipped, modified or when the scan results look distorted. </p>
<p>NOTE: Only after finishing the calibration successfully you will have good scan results .</p>
<p>The calibration will be done by scanning an calibration sheet with a specific pattern which must be placed on the turntable. The pattern must face the camera:</p>
<p><img alt="main_menu" src="../images/calibration_start_position.jpg" />
NOTICE: The second laser in the image is not supported by the software yet. This will be a feature available within the next release.</p>
<p>Option 1: You can can build your own calibration tool from cardboard. Print the calibration sheet onto paper and glue it to cardboard. Build a stand of another piece of cardboard. Maybe you have to fix the calibration sheet on the turntable by using some adhesive tape.</p>
<p>Option 2: You have an 3D-printer available and can print out our calibration sheet holder. There's also a different calibration sheet for external holder use.</p>
<p>INFO: To get a perfectly flat and stable surface glue the calibration sheet on a piece of thick pcb (printed circuit board).</p>
<p><a href="https://github.com/mariolukas/FabScan-Case/tree/master/calibration">Download calibration mount and sheet!</a></p>
<p>Note: Please check if your print of the calibration sheet has the correct scale. Each black square should have the same side length as stated on the calibration sheet (e.g.11 mm (1,1 cm). If the size is not correct please correct the parameter "pattern square size" in the configuration file. </p>
<p>You can find all details in the chapter "<a href="#editConfigFile">How to Edit the Config File</a>".</p>
<p>Place the calibration sheet on the turntable facing the camera.</p>
<p><img alt="main_menu" src="../images/calibration_start_position.jpg" /></p>
<p>Please close the box to avoid external light sources to impact the calibration process. Start  your browser and call http://ip-of-your-raspberry-pi:8080 which will open the user interface. </p>
<p>When you start your FabScanPi for the first time you will see an information in the upper left corner that you have to perform a calibration.</p>
<p><img alt="main_menu" src="../images/Manual_NoCalibration_1.jpg" /></p>
<p>Start the calibration procedure by clicking on the gun sight icon in the very upper left corner.</p>
<p><img alt="main_menu" src="../images/Manual_1.jpg" /></p>
<p>An information "Calibration started" will be displayed in the upper left corner.</p>
<p><img alt="main_menu" src="../images/Manual_2a.jpg" /></p>
<p>The calibration may need several minutes. During the calibration an information about the remaining time is displayed. </p>
<p><img alt="main_menu" src="../images/Manual_2b.jpg" /></p>
<p>When the calibration was finished successfully another notification will appear for a short time in the upper left corner.</p>
<p><img alt="main_menu" src="../images/Manual_2c.jpg" /></p>
<p>Now you can remove the calibration pattern sheet from the turntable and start your first scan.</p>
<p>NOTE: If your scan results look not like they should, probably distorted or skewed please check the calibration data in the configuration file. You can find details about the different relevant parameters in the <a href="#config-file-values">Config File Values</a> section of this documentation.</p>
<p><strong>Scan Settings<a name="scansettings"></a></strong></p>
<p>Note: The current settings are only persistent as long as the pi is up and running. The settings are saved with the scan data after a successful scan. They can be loaded to scan another object with the same settings. E.g. an object what consists of the same material, color etc. </p>
<ul>
<li>Click on the duckling-symbol to open the scan menu.</li>
</ul>
<p><img alt="open_the_scan_menu" src="../images/Manual_4.jpg" /></p>
<ul>
<li>The threshold-slider (6) can be used to adjust the sensitivity of the captured data. Select the scan quality by using the other slider (7). 
  Note: The better the scan the longer is the required capture time. Sometimes it is better to start with a low resolution to control the selected settings result. If the result is nice you can perform a higher resolution scan with the same settings.</li>
</ul>
<p><img alt="scan_menu" src="../images/Manual_5a.jpg" /></p>
<p>By clicking on the contrast-icon (3) you will get access to the camera settings menu. For adjusting the camera presets three sliders for saturation, brightness and contrast are available.</p>
<p><img alt="camera_settings_menu" src="../images/Manual_6.jpg" /></p>
<p>Click on the light-symbol (4) to get access to the lighting menu.</p>
<p><img alt="scan_menu" src="../images/Manual_5a.jpg" /></p>
<p>Here you can use the sliders to change the brightness and color of the (optional) light source. When all three sliders are at the very left end the light is off. Watch the preview in the lower left corner of the menu.
<img alt="lighting_menu" src="../images/Manual_7.jpg" /></p>
<p>Note: The setting in the lighting menu will only cause an effect if an optional WS2812-compatible light source (e.g. Adafruit NeoPixel LED-Ring or FabScanPi-Camera-Holder) is installed.
Click on the  arrows-and-circle symbol (5) to get access to the alignment menu.
<img alt="scan_menu" src="../images/Manual_5a.jpg" /></p>
<p><strong>Perform a scan<a name="performAScan"></a></strong></p>
<p><strong>Color Scan</strong><a name="colorScan"></a></p>
<ul>
<li>Make sure your FabScanPi is switched on, an object is placed on the turntable and the lid / the optional laser safety switch is closed.</li>
<li>Open the web-interface as described in chapter 
  <a href="#gettingStarted">Getting Started</a>.</li>
<li>Click on the duckling-symbol to open the scan menu.</li>
</ul>
<p><img alt="open_scan_menu" src="../images/Manual_4.jpg" /></p>
<p>Note: If you do not have installed a light source you should perform a <a href="#monochromeScan">monochrome scan</a>.</p>
<ul>
<li>Adjust the scan preset values to your needs as described in chapter <a href="#presets">Presets</a>.</li>
</ul>
<p><img alt="scan_menu" src="../images/Manual_TextureScan_1.jpg" /></p>
<ul>
<li>Click on .Start Scan. to initiate the process
  A starting message will be displayed. Now the texture will be processed.</li>
</ul>
<p><img alt="texture_capturing" src="../images/Manual_TextureScan_2.jpg" /></p>
<p>The latest photo will be displayed during the capturing process.</p>
<p><img alt="capturing_starts" src="../images/Manual_TextureScan_3.jpg" /></p>
<p>When the texture has been captured (progress bar at 50 percent) the actual scan is initiated. A notification is displayed.
<img alt="scan_starts" src="../images/Manual_TextureScan_4.jpg" /></p>
<p>A notification will be displayed when the scan is completed / file is saved.
<img alt="scan_completed" src="../images/Manual_TextureScan_5.jpg" /></p>
<ul>
<li>You can now check, download or delete the scan-data.</li>
</ul>
<p><strong>Monochrome scan</strong><a name="monochromeScan"></a></p>
<ul>
<li>Make sure your FabScanPi is switched on, an object is placed on the turntable and the lid / the optional laser safety switch is closed.</li>
<li>Open the web-interface as described in chapter 
  <a href="#gettingStarted">Getting Started</a>.</li>
<li>Click on the duckling-symbol to open the scan menu.</li>
</ul>
<p><img alt="open_scan_menu" src="../images/Manual_4.jpg" /></p>
<ul>
<li>Adjust the scan preset values to your needs as described in chapter <a href="#presets">Presets</a>.</li>
<li>Uncheck the color-scan option (8)</li>
</ul>
<p><img alt="scan_menu" src="../images/Manual_5a.jpg" /></p>
<ul>
<li>Click on .Start Scan. to initiate the process
  A starting message will be displayed and the scan process is started.</li>
</ul>
<p><img alt="scan_starts" src="../images/Manual_Scan_2.jpg" /></p>
<p>When the scan is completed / file is saved a notification will be displayed. 
<img alt="scan_completed" src="../images/Manual_Scan_3.jpg" /></p>
<ul>
<li>You can now check, download or delete the scan-data.</li>
</ul>
<p><strong>Generate Mesh</strong><a name="generateMesh"></a></p>
<p>The FabScanPi software includes a feature to convert a scan into a mesh-file. This mesh-file can be used for 3D-printing.
Note: To generate a mesh-file a scan must have been performed. It is also possible to load a scan-file which has been saved previously. </p>
<ul>
<li>
<p>Click on the options icon to open the options menu.
  <img alt="open_options_menu" src="../images/Manual_CreateMash_1.jpg" /></p>
</li>
<li>
<p>The options menu will open and you can see the index card of the loaded file.
  <img alt="open_options_menu" src="../images/Manual_CreateMash_1.jpg" /></p>
</li>
<li>
<p>Click on the magic wand icon to open the menu for the MeshLab filter.
  <img alt="open_options_menu" src="../images/Manual_CreateMash_3.jpg" /></p>
</li>
<li>
<p>Now select one of the Meshlab filters and the file format for the future mesh file.</p>
</li>
<li>
<p>Click on "Start Meshing" to activate the conversion process. 
  <img alt="open_options_menu" src="../images/Manual_CreateMash_4.jpg" /></p>
</li>
</ul>
<p>The conversion starts and the main menu appears. A notification is displayed as well.
Note: Depending on the size and complexity of the scan file as well as the type of selected filter the conversion process may take some time.
<img alt="open_options_menu" src="../images/Manual_CreateMash_5.jpg" /></p>
<p>When the mesh-file is available a notification is displayed.
<img alt="open_options_menu" src="../images/Manual_CreateMash_6.jpg" /></p>
<ul>
<li>
<p>Again open the options menu. Another index card for the mesh-file has been added.</p>
</li>
<li>
<p>Click on the mesh-file index card.</p>
</li>
<li>
<p>You can now click on the download-icon to download the mesh-file to your computer or click on the trashbasket icon to delete the mesh-file.
  <img alt="open_options_menu" src="../images/Manual_CreateMash_8.jpg" /></p>
</li>
</ul>
<p><strong>File Operations</strong><a name="fileOperations"></a></p>
<ul>
<li>Load files<a name="loadFiles"></a></li>
</ul>
<p>A scan result which has been saved to the FabScanPi memory previously can be reloaded. Go to the main menu and click on the folder-icon at the left side of the menu bar.
<img alt="main_menu-load_scan" src="../images/Manual_LoadScan_1.jpg" /></p>
<ul>
<li>Scroll through the displayed file inventory and click on the icon of the wanted file.</li>
</ul>
<p><img alt="load_scan" src="../images/Manual_LoadScan_2.jpg" /></p>
<p>Now the selected file will be loaded which may need some time. After the loading process is finished a notification will be displayed.
<img alt="loaded_scan-file" src="../images/Manual_LoadScan_3.jpg" /></p>
<ul>
<li>Delete files<a name="deleteFiles"></a></li>
</ul>
<p><strong>Delete a scan-file</strong>
A scan result which has been saved to the FabScanPi memory previously can be deleted. To do that it must be loaded and displayed on the virtual turntable in the main menu.
-Click on the options-icon on the right side of the menu bar.
<img alt="delete_files" src="../images/Manual_CreateMash_1.jpg" /></p>
<p>Click on the wastebasket-icon to delete the scan-file.
NOTE: By deleting a scan file the corresponding mesh file (if available) will be deleted instantly.</p>
<p><strong>Delete a mesh-file</strong>
Note: If a mesh file is available a second slide for the mesh file will be displayed.
<img alt="mesh_slide_available" src="../images/Manual_CreateMash_1.jpg" /></p>
<p>By selecting the mesh slide and clicking on the wastebasket-icon the mesh-file can be deleted separately. 
<img alt="loaded_scan-file" src="../images/Manual_DeleteScan_1.jpg" /></p>
<ul>
<li>Download Files<a name="downloadFiles"></a>
  It is possible to download generated files (either scan- or mesh-files) from the FabScanPi via the web-based user interface. </li>
</ul>
<p><strong>Download a scan-file</strong>
Note: Before you can download a file it must be <a href="#loadFiles">loaded</a> and displayed on the virtual turntable in the main menu.</p>
<ul>
<li>
<p>Go to the main menu.</p>
</li>
<li>
<p>Click on the options-icon on the right side of the menu bar.</p>
</li>
</ul>
<p><img alt="delete_files" src="../images/Manual_CreateMash_1.jpg" /></p>
<ul>
<li>
<p>Click on the download-icon to download the mesh-file</p>
</li>
<li>
<p>A download message (depending on the used web-browser) will be displayed</p>
</li>
</ul>
<p><strong>Download a mesh-file</strong>
Note: If a mesh file is available a second slide for the mesh file will be displayed.
<img alt="mesh_slide_available" src="../images/Manual_CreateMash_1.jpg" /></p>
<ul>
<li>Select the mesh slide</li>
<li>Click on the download-icon to download the mesh-file</li>
<li>A download message (depending on the used web-browser) will be displayed</li>
</ul>
<h1 id="config-file-values">Config File Values</h1>
<p>A configuration file can be found in /etc/fabscanpi/default.config.json. The content of this file 
is in JSON format and can be edited with an editor of your choice (e.g. nano). Be careful and don't
miss brackets. JSON is really sensitive in it's format.</p>
<p>NOTE: The following listing snippets are only examples and may deviate from the latest settings.</p>
<p><strong>Folders</strong></p>
<p>In this section you can change the scan output folder and the folder where the ui is located. If 
you don't know what you are doing, it is a good decision to keep this section untouched.</p>
<pre><code>   &quot;folders&quot;: {
        &quot;www&quot;: &quot;/usr/share/fabscanpi/&quot;,
        &quot;scans&quot;: &quot;/var/scans/&quot;
    }
</code></pre>

<p><strong>Laser</strong></p>
<p>This section describes the laser stepper motor values. The rotation_steps value should be used for a laser angle change (not implemented yet).Steps defines how many steps the motor can do. In the default case the motor is set to 1/16 step mode. A motor with 200 steps per turn can then perform 3200 steps. </p>
<pre><code>    &quot;laser&quot;: {
        &quot;steps&quot;: 3200,
        &quot;numbers&quot;: 1,
        &quot;rotation_steps&quot;: 5
    }
</code></pre>

<p><strong>Scanner Calibration</strong></p>
<p>In this section you can change the parameters of the configuration sheet. If your printout of the calibration sheet has not the exact scale you can adjust the parameters here instead of scaling the print. </p>
<p>NOTE: There is a new " 8x6 Calibration Pattern". If you are still using the old 9x6 Pattern you'll need to modify the columns value:</p>
<p>"scanner_type": "laserscanner",
"calibration": {</p>
<pre><code>&quot;weight_matrix&quot;: [],
&quot;dist_camera_matrix&quot;: [],
&quot;pattern&quot;: {
    &quot;square_size&quot;: 11,
    &quot;rows&quot;: 6,
    &quot;columns&quot;: 8,
    &quot;origin_distance&quot;: 35
}
</code></pre>

<ul>
<li>Square Size is the side length of one black square in millimeters.</li>
</ul>
<p><img alt="PuTTY_Menu" src="../images/calibration_sheet_info_2.png" /></p>
<ul>
<li>Rows and Columns are the connection points of the black squares. The correct number is 8 for columns and 6 for rows :</li>
</ul>
<p><img alt="PuTTY_Menu" src="../images/calibration_sheet_info_1.png" /></p>
<ul>
<li>Origin Distance is the distance between turntable surface and the upper edge of the black squares in the row close to the turntable.<img alt="PuTTY_Menu" src="../images/Origin_Distance.jpg" /></li>
</ul>
<p><strong>Scanner Calibration Values</strong></p>
<p>In this section you can check the calibration parameters. Please make sure you have performed the auto-calibration before starting your first scan.
Do not change these values manually. This values are generated by the autocalibration process. </p>
<pre><code>        &quot;camera_matrix&quot;: [
            [
                1285.5809999999999,
                0.0,
                647.60199999999998
            ],
            [
                0.0,
                1289.9490000000001,
                835.84400000000005
            ],
            [
                0.0,
                0.0,
                1.0
            ]
        ],
        &quot;distortion_vector&quot;: [
            0.151,
            -0.20300000000000001,
            -0.0050000000000000001,
            0.0060000000000000001,
            -0.70899999999999996
        ],
        &quot;laser_planes&quot;: [
            {
                &quot;deviation&quot;: 0.052318819865,
                &quot;distance&quot;: 137.366403938,
                &quot;normal&quot;: [
                    0.56199451,
                    -0.01896656,
                    0.82692348
                ]
            }
        ],
        &quot;platform_translation&quot;: [
            4.21176054e-03,
            4.26178340e+01,
            1.66114592e+02
        ],
        &quot;platform_rotation&quot;: [
            [
                0.0,
                9.99977231e-01,
                6.74816764e-03
            ],
            [
                4.51612662e-02,
                6.74128255e-03,
                -9.98956964e-01
            ],
            [
                -0.99903697271524872,
                0.00030800546235732861,
                -0.043875189806843448
            ]
        ]
    }
</code></pre>

<p><strong>Meshlab settings</strong></p>
<p>​In this section you can change the path for the converter which transforms the scanned pixel data into another format (e.g. .stl).    </p>
<pre><code>    &quot;meshlab&quot;: {
        &quot;path&quot;: &quot;/usr/bin/&quot;
    }
</code></pre>

<p><strong>Table settings</strong></p>
<p>In this section you can change the turntable settings. The radius of the turntable is in millimeters (mm). In the default case the motor is set to 1/16 step mode. A motor with 200 steps per turn can then perform 3200 steps. Radius is the radius of the turntable in millimeters (mm). </p>
<pre><code>    &quot;process_numbers&quot;: 4,
    &quot;turntable&quot;: {
        &quot;steps&quot;: 3200,
        &quot;radius&quot;: 70
    }
</code></pre>

<p><strong>Camera settings</strong></p>
<p>Preview Resolution is the resolution value for the settings window. Resolution is the resolution for the picamera python module. You can have a look to the documentation of picamera. If you set this to other values please be sure what you are doing, not all resolutions are supportedby the picam. Some might lead to slower image capturing.    </p>
<pre><code>    &quot;camera&quot;: {
        &quot;resolution&quot;: {
            &quot;width&quot;: 1640,
            &quot;height&quot;: 1232
        },
        &quot;preview_resolution&quot;: {
            &quot;width&quot;: 240,
            &quot;height&quot;: 320
        },
        &quot;rotate&quot;: &quot;True&quot;,
        &quot;hflip&quot;: &quot;True&quot;,
        &quot;vflip&quot;: &quot;False&quot;,
        &quot;type&quot;: &quot;PICAM&quot;
    }
</code></pre>

<p><strong>Serial</strong></p>
<p>In this section you can set your port. By default this value is not set, because theFabScanPi Server software autodetcts the correct port. Some Arduino and compatible boards differ in the port name. The port can be set if you are not using an Arduino UNO or compatible Board. In case that your Arduino is not detected and you can see an error in the /var/log/fabscanpi/fabscan.logyou should add the "port" attribute to your config.</p>
<p>The autoflash option is True by default, that means that the firmware is flashed automatically to the Arduino or FabScanPi HAT. If you want to use a custom board e.g. sanguinololu, you can set thisto False and flash the Firmware manually to your board. 
​    </p>
<pre><code>    &quot;serial&quot;: {
        &quot;baudrate&quot;: 115200,
        &quot;autoflash&quot;: &quot;True&quot;,
        &quot;port&quot;: &quot;/dev/ttyAMA0&quot;
    }
</code></pre>

<p><strong>Texture illumination</strong></p>
<p>In this section you can change the pre-set brightness level of the LED-Ring during texture scan.</p>
<pre><code>    &quot;texture_illumination&quot;: 140
    }
</code></pre>

<h1 id="how-to-edit-the-config-file">How to Edit the Config File<a name="editConfigFile"></a></h1>
<p><strong>Remote access to change the configuration settings</strong></p>
<p>It is most likely that you don't have a monitor nor mouse and keyboard connected to your FabScanPi all the time. But maybe you need to make some changes to the config file from time to time and you don't want to connect the peripherals everytime.</p>
<p>This can be done via a remote PC which is connected to the same network.</p>
<p><strong>Connecting as Windows User (Putty)</strong></p>
<p>First of all you need to download the tiny program "PuTTY" from http://www.putty.org/.</p>
<p>PuTTY is a SSH client program which establishes the connection to your FabScanPi. There is no no graphic user interface -only a console which allows only the exchange of text. But that's enough to make some changes in the config file or to update your FabScanPi-Software.</p>
<p>You don't need to make an installation just put the putty.exe in a folder or your desktop. Of course you can start it directly from the download folder as well.</p>
<p>Now you must know the IP-address which has be assigned to your FabScanPi. It is the same address you're using to get access via the webbrowser (e.g. 192.168.1.8). Usually you can check the current IP-address in the user-interface of your web-router or cable modem.</p>
<p>Start <strong>Putty.exe</strong> and a window will pop up.</p>
<p><img alt="PuTTY_Menu" src="../images/PuTTY_Menu.jpg" /></p>
<p>Type in your IP-address in the appropriate field and click on "OPEN".</p>
<p><img alt="Login" src="../images/Login.jpg" /></p>
<p>Now the console window opens and you must type in "<strong>pi</strong>" as <strong>login-name</strong> and "<strong>raspberry</strong>" as <strong>password</strong> (without the quotes). Now you should be able to see the login prompt (similar to the picture above).</p>
<p><strong>Connecting as Linux or OSX User (Terminal)</strong></p>
<p>Linux users can open a Terminal and type "<strong>ssh pi@fabscanpi.local</strong>"  ("<strong>sh pi@ip-address-of-you-pi</strong>"). 
Next you are asked for a password. Type in "<strong>raspberry</strong>" as <strong>password</strong> (without the quotes).
The next steps are described with screenshots for Putty, but the workflow is the same once the connection is 
established.</p>
<p><img alt="Login" src="../images/ssh_linux.png" /></p>
<p><strong>Changing the config file.</strong></p>
<p>The config file is in a different folder, so you must change into that folder by entering the command:</p>
<p>cd /etc/fabscanpi/</p>
<p>and press ENTER.</p>
<p>To view and modify the config file (default.config.json) you must open it with an editor and using administrator rights to be able to save the changes into the same file. The editor which is already installed is called nano. So type in:</p>
<p><strong>sudo nano default.config.json</strong></p>
<p><img alt="Open_Nano" src="../images/Open_Nano.jpg" /></p>
<p>You have to enter the password "<strong>raspberry</strong>" (without the quotes) again, because you open the editor with administrator rights.</p>
<p>The nano-editor now displays the config-file and maybe you have to enlarge the window to have a better view.</p>
<p>Now you can perform the desired changes by using the keyboard. To navigate you have to use the up-, down-, left- and right-key.</p>
<p><img alt="Config" src="../images/Config.jpg" /></p>
<p>If you finished your modification press you can save the file by pressing and holding <strong>CTRL</strong> and <strong>O</strong> (german keyboard: STRG and O). Press RETURN to confirm the filename.</p>
<p>Now you can exit the editor by pressing and holding <strong>CTRL</strong> and <strong>X</strong> (german keyboard: STRG and X).</p>
<p>For the changes to take effect you must restart your FabScanPi by typing in the command</p>
<p><strong>sudo reboot</strong></p>
<p>and ENTER.</p>
<p><img alt="Reboot" src="../images/Reboot.jpg" /></p>
<p>You can now close the PuTTY window.</p>
<p>The FabScanPi is rebooting and after a short time you can refresh your webbrowser and start using the FabScanPi with the new config settings.</p>
<h3 id="troubleshooting">Troubleshooting</h3>
<p>Can not connect to Arduino.
Is the Arduino connected to the USB port. Check the port in your fabscanpi-server configuration
file. Try another port e.g. /dev/ttyUSB0. 
More information about changing the configuration can be found in "FabScan Pi Configuration"
section.</p>
<p>Camera is not connected. 
Check the cable from the Raspberry Pi to the camera module. Be careful the cable can be very
fragil. Try another camera application for checking camera functionality e.g. <a href="https://www.raspberrypi.org/documentation/usage/camera/raspicam/raspistill.md">raspistill</a>.</p>
<h1 id="setting-up-a-wifi-connection">Setting up a WIFI connection</h1>
<p>This description explains howto setup a wifi stick for raspbian. I prefer to use an EDIMAX dongle, it worked best for me. 
First plug in your wifi dongle and log in via ssh with password "raspberry" (without quotes):</p>
<pre><code>ssh pi@&lt;your-fabscanpi-ip&gt;
</code></pre>

<p>First you have to activate the wifi option in your networking setup. </p>
<pre><code>sudo nano /etc/network/interfaces
</code></pre>

<p>Uncomment the folling lines and save the changes. </p>
<pre><code>auto wlan0
allow-hotplug wlan0
iface wlan0 inet dhcp
wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
iface default inet dhcp
</code></pre>

<p>Now restart your network adapters. </p>
<pre><code>sudo /etc/init.d/networking restart
</code></pre>

<p>If you type <code>sudo ifconfig</code> there should be a wlan0 connection in the list. </p>
<p>Your fasbcanpi image is ready to go. The only things you have to do is open wpa_supplicant.conf and 
insert your wifi ssid and your wifi secret.</p>
<pre><code>sudo nano /etc/wpa_supplicant/wpa_supplicant.conf
</code></pre>

<p>Save the file and try to connect to your wifi by typing the following command.</p>
<pre><code>sudo ifup wlan0
</code></pre>

<p>In some cases you have to reboot the Raspberry Pi. Check if the wifi dongle's led is bliking.
If you want to change your Raspberry Pi to a fix wifi IP address you have to change the interfaces file
to get a static wifi connection.</p>
<pre><code>sudo nano /etc/network/interfaces
</code></pre>

<p>Change the files content from </p>
<pre><code>auto lo
iface lo inet loopback

allow-hotplug eth0
iface eth0 inet dhcp

auto wlan0
allow-hotplug wlan0
iface wlan0 inet dhcp
wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
iface default inet dhcp
</code></pre>

<p>to </p>
<pre><code>auto lo
iface lo inet loopback

allow-hotplug eth0
iface eth0 inet dhcp

auto wlan0
allow-hotplug wlan0
iface wlan0 inet static
address &lt;ip in your network&gt;
netmask &lt;your netmask&gt;
gateway &lt;your gateway&gt;
wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
iface default inet dhcp
</code></pre>

<p>After you changed the file you can restart your network daemon.</p>
<pre><code>sudo /etc/init.d/networking restart
</code></pre>
              
              

            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../examples/" class="btn btn-neutral float-right" title="Examples">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../hardware/" class="btn btn-neutral" title="Hardware"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>© Copyright 2015-2016, Mario Lukas</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/mariolukas/FabScanPi-Server" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../hardware/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../examples/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>
      <script src="../js/main.js"></script>

</body>
</html>
